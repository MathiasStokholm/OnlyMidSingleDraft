{"version":3,"sources":["backend.js","serviceWorker.js","components/header.js","components/welcome.js","components/chat.js","components/team.js","MainScreen.js","index.js"],"names":["Backend","onHeroStatsAvailable","onGameChanged","onNewGame","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebase","initializeApp","this","db","firestore","console","log","gameCollectionName","heroStatsDocument","gameCollection","collection","heroStatsCollection","HERO_STATS_COLLECTION","gameDoc","orderBy","limitToLast","onSnapshot","games","docs","forEach","doc","newGame","id","ref","data","error","heroStats","get","then","stats","catch","reason","getUpdatedHeroStats","updatedHeroStats","fetch","result","json","path","team","player","message","update","FieldValue","arrayUnion","Timestamp","fromDate","Date","teamName","playerName","playerIndex","heroId","ready","mappedHeroes","int","str","agi","hero","heroAttribute","push","draft","randomSamplePop","createTeam","players","chat","0","1","2","3","4","selectedHeroes","updatedHeroStatsPromise","set","cacheHeroStats","timeoutPromise","Promise","resolve","reject","setTimeout","clearTimeout","race","add","timestamp","teams","radiant","dire","items","idx","Math","floor","random","length","sample","splice","Boolean","window","location","hostname","match","Header","props","state","newGameDialogShowing","setState","Modal","isOpen","className","toggle","toggleNewGameDialog","ModalHeader","ModalBody","ModalFooter","Button","color","onClick","backend","startNewGame","Navbar","expand","style","marginBottom","NavbarBrand","tag","Link","to","Nav","navbar","NavItem","NavLink","event","preventDefault","startNewGameClicked","React","Component","Welcome","Spinner","radiantPlayers","map","ListGroupItem","key","direPlayers","Container","Row","Col","Card","CardImg","src","alt","CardBody","CardTitle","CardSubtitle","ListGroup","flush","disabled","Chat","scrollToBottom","messagesEnd","scrollIntoView","behavior","inputValue","submitMessage","target","value","sendChatMessage","prevProps","messages","messageList","dummyForScroll","float","clear","el","InputGroup","Input","onChange","updateInputValue","onKeyPress","handleKeyPress","InputGroupAddon","addonType","Team","playerNameInput","newValue","chosenPlayerName","setPlayerName","setSelectedHero","history","autoFocus","type","onPlayerNameInput","placeholder","playerNameChosen","createPlayerRow","hero_ids","selected_id","hero_id","filter","selected","tooltipId","xs","href","cursor","onHeroClicked","inverse","top","convertToApiPath","CardHeader","drafts","index","toString","this_team_ready","radiant_ready","readiness","dire_ready","readyIndicator","setReady","Progress","multi","bar","sm","md","AlignedText","styled","div","MainScreen","heroes","res","performDraft","Object","values","randomSample","width","height","renderedHeroes","CardText","join","marginTop","e","Main","App","radiantMessages","direMessages","game","radiantTeam","direTeam","router","basename","exact","render","ReactDOM","document","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.4780e6d6.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/firestore'\r\n\r\nclass Backend {\r\n    config = {\r\n        apiKey: \"AIzaSyCVXi7MSmaFcSDtvK2eYdpggzQgbHOf_dk\",\r\n        authDomain: \"onlymid-6adbf.firebaseapp.com\",\r\n        databaseURL: \"https://onlymid-6adbf.firebaseio.com\",\r\n        projectId: \"onlymid-6adbf\",\r\n        storageBucket: \"onlymid-6adbf.appspot.com\",\r\n        messagingSenderId: \"464340805319\",\r\n        appId: \"1:464340805319:web:65283996aefc809d2800e2\"\r\n    };\r\n\r\n    static HERO_STATS_COLLECTION = \"hero_stats\";\r\n\r\n    constructor(onHeroStatsAvailable, onGameChanged, onNewGame) {\r\n        firebase.initializeApp(this.config);\r\n        this.db = firebase.firestore();\r\n\r\n        if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n            // Access testing game collection\r\n            console.log(\"Using test game collection\");\r\n            this.gameCollectionName = \"game_test\";\r\n            this.heroStatsDocument = \"hero_stats_test\";\r\n        } else {\r\n            // Access production game collection\r\n            console.log(\"Using production game collection\");\r\n            this.gameCollectionName = \"game\";\r\n            this.heroStatsDocument = \"hero_stats\";\r\n        }\r\n\r\n        // Create references to collections\r\n        this.gameCollection = this.db.collection(this.gameCollectionName);\r\n        this.heroStatsCollection = this.db.collection(Backend.HERO_STATS_COLLECTION);\r\n\r\n        this.gameDoc = null;\r\n        this.gameCollection\r\n            .orderBy(\"timestamp\")\r\n            .limitToLast(1)\r\n            .onSnapshot(games => {\r\n                games.docs.forEach(doc => {\r\n                    const newGame = this.gameDoc == null ? false : this.gameDoc.id !== doc.id;\r\n                    this.gameDoc = doc.ref;\r\n                    if (newGame) {\r\n                        onNewGame();\r\n                    }\r\n                    onGameChanged(doc.data());\r\n                });\r\n            }, error => console.log(error));\r\n\r\n        // Fetch the actual dota 2 data that was cached in firebase\r\n        this.heroStats = null;\r\n        this.heroStatsCollection.doc(this.heroStatsDocument).get()\r\n            .then(doc => {\r\n                const stats = doc.data()[\"stats\"];\r\n                this.heroStats = stats;\r\n                onHeroStatsAvailable(stats);\r\n            })\r\n            .catch(reason => {\r\n                // If the backend completely fails, fall back on API data\r\n                console.log(\"Error while loading hero stats from backend: \" + reason);\r\n                this.getUpdatedHeroStats()\r\n                    .then(updatedHeroStats => {\r\n                        console.log(\"FALLING BACK TO UPDATED HERO STATS\");\r\n                        this.heroStats = updatedHeroStats;\r\n                        onHeroStatsAvailable(updatedHeroStats);\r\n                    });\r\n            });\r\n    }\r\n\r\n    getUpdatedHeroStats() {\r\n        return fetch(\"https://api.opendota.com/api/heroStats\")\r\n            .then(result => result.json());\r\n    }\r\n\r\n    convertToApiPath(path) {\r\n        return \"https://api.opendota.com\" + path\r\n    }\r\n\r\n    sendChatMessage(team, player, message) {\r\n        const path = \"teams.\" + team + \".chat\";\r\n        this.gameDoc.update(path, firebase.firestore.FieldValue.arrayUnion({\r\n            \"timestamp\": firebase.firestore.Timestamp.fromDate(new Date()),\r\n            \"player\": player,\r\n            \"message\": message,\r\n        }))\r\n            .catch(reason => console.log(reason));\r\n    }\r\n\r\n    setPlayerName(teamName, playerName) {\r\n        const path = \"teams.\" + teamName + \".players\";\r\n        this.gameDoc.update(path, firebase.firestore.FieldValue.arrayUnion(playerName))\r\n            .catch(reason => console.log(reason));\r\n    }\r\n\r\n    setSelectedHero(teamName, playerIndex, heroId) {\r\n        const path = `teams.${teamName}.selectedHeroes.${playerIndex}`;\r\n        this.gameDoc.update(path, heroId)\r\n            .catch(reason => console.log(reason));\r\n    }\r\n\r\n    setReady(teamName, ready) {\r\n        const path = `teams.${teamName}.ready`;\r\n        this.gameDoc.update(path, ready)\r\n            .catch(reason => console.log(reason));\r\n    }\r\n\r\n    startNewGame() {\r\n        if (this.heroStats === null) {\r\n            console.log(\"Cannot create new game - hero stats not loaded yet\");\r\n            return;\r\n        }\r\n\r\n        // Sort into a lists of int, str and agi\r\n        let mappedHeroes = {int: [], str: [], agi: []};\r\n        this.heroStats.forEach(hero => {\r\n            const heroAttribute = hero['primary_attr'];\r\n            mappedHeroes[heroAttribute].push(hero)\r\n        });\r\n\r\n        const draft = () => {\r\n            return [\r\n                this.randomSamplePop(mappedHeroes[\"int\"])[\"id\"],\r\n                this.randomSamplePop(mappedHeroes[\"str\"])[\"id\"],\r\n                this.randomSamplePop(mappedHeroes[\"agi\"])[\"id\"]\r\n            ]\r\n        };\r\n\r\n        let createTeam = () => {\r\n            return {\r\n                ready: false,\r\n                players: [],\r\n                chat: [],\r\n                draft: {\r\n                    0: draft(),\r\n                    1: draft(),\r\n                    2: draft(),\r\n                    3: draft(),\r\n                    4: draft(),\r\n                },\r\n                selectedHeroes: {\r\n                    0: null,\r\n                    1: null,\r\n                    2: null,\r\n                    3: null,\r\n                    4: null,\r\n                }\r\n            }\r\n        };\r\n\r\n        const cacheHeroStats = (updatedHeroStats) => {\r\n            // Mirror the Dota 2 hero data to our backend\r\n            return this.heroStatsCollection\r\n                .doc(this.heroStatsDocument)\r\n                .set({stats: updatedHeroStats})\r\n                .then(() => {\r\n                    console.log(\"Hero stats cached to backend\");\r\n                });\r\n        };\r\n\r\n        const createNewGame = () => {\r\n            // Create a new game!\r\n            this.gameCollection.add({\r\n                timestamp: firebase.firestore.Timestamp.fromDate(new Date()),\r\n                teams: {\r\n                    radiant: createTeam(),\r\n                    dire: createTeam(),\r\n                }\r\n            })\r\n                .then(() => console.log(\"Created new game!\"))\r\n                .catch(reason => console.log(reason));\r\n        };\r\n\r\n        // Try to fetch updated dota 2 data for caching\r\n        const updatedHeroStatsPromise = this.getUpdatedHeroStats()\r\n            .then(updatedHeroStats => {\r\n                console.log(\"Loaded updated hero stats from API\");\r\n                return cacheHeroStats(updatedHeroStats);\r\n            })\r\n            .catch(reason => {\r\n                console.log(\"Failed getting hero stats: \" + reason + \". Falling back to cached data\");\r\n                return this.heroStats\r\n            });\r\n\r\n        // Timeout if updating the cached hero stats is taking too long, and just use the current stats instead\r\n        const timeoutPromise = new Promise((resolve, reject) => {\r\n            let id = setTimeout(() => {\r\n                clearTimeout(id);\r\n                resolve(this.heroStats)\r\n            }, 5000)\r\n        });\r\n\r\n        Promise.race([updatedHeroStatsPromise, timeoutPromise])\r\n            .then(createNewGame)\r\n            .catch(reason => console.log(reason));\r\n    }\r\n\r\n    randomSamplePop(items) {\r\n        const idx = Math.floor(Math.random() * items.length);\r\n        const sample = items[idx];\r\n        items.splice(idx, 1);\r\n        return sample;\r\n    }\r\n}\r\n\r\nexport default Backend;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react'\r\nimport {Link} from 'react-router-dom';\r\nimport {\r\n    Navbar,\r\n    NavbarBrand,\r\n    Nav,\r\n    NavItem,\r\n    NavLink, Modal, ModalHeader, ModalFooter, Button, ModalBody\r\n} from 'reactstrap';\r\n\r\nclass Header extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            newGameDialogShowing: false\r\n        };\r\n    }\r\n\r\n    toggleNewGameDialog() {\r\n        this.setState({\r\n            newGameDialogShowing: !this.state.newGameDialogShowing\r\n        })\r\n    }\r\n\r\n    startNewGameClicked() {\r\n        this.setState({\r\n            newGameDialogShowing: true\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Modal isOpen={this.state.newGameDialogShowing} className={this.props.className}\r\n                       toggle={() => this.toggleNewGameDialog()}>\r\n                    <ModalHeader>Starting new game</ModalHeader>\r\n                    <ModalBody>\r\n                        This will reset the existing draft and teams\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <Button color=\"primary\" onClick={() => {\r\n                            this.props.backend.startNewGame();\r\n                            this.toggleNewGameDialog();\r\n                        }}>Start new game!</Button>\r\n                        <Button color=\"muted\" onClick={() => this.toggleNewGameDialog()}>Cancel</Button>\r\n                    </ModalFooter>\r\n                </Modal>\r\n                <Navbar color=\"dark\" className=\"navbar-dark\" expand=\"md\" style={{marginBottom: '5px'}}>\r\n                    <NavbarBrand tag={Link} to=\"/\">Only Mid Single Draft</NavbarBrand>\r\n                    <Nav className=\"ml-auto\" navbar>\r\n                        <NavItem>\r\n                            <NavLink tag={Link} to=\"/old\">Old App</NavLink>\r\n                        </NavItem>\r\n                        <NavItem>\r\n                            <NavLink tag={Link} to=\"/\" onClick={(event) => {\r\n                                event.preventDefault();\r\n                                this.startNewGameClicked();\r\n                            }}>Start New Game</NavLink>\r\n                        </NavItem>\r\n                    </Nav>\r\n                </Navbar>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Header\r\n","import React from 'react'\r\nimport {\r\n    Button,\r\n    Card,\r\n    CardBody,\r\n    CardImg,\r\n    CardSubtitle,\r\n    CardTitle,\r\n    Col,\r\n    Container,\r\n    ListGroup,\r\n    ListGroupItem,\r\n    Row,\r\n    Spinner\r\n} from \"reactstrap\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\n\r\nclass Welcome extends React.Component {\r\n    render() {\r\n        const teams = this.props.teams;\r\n        if (teams == null) {\r\n            return (\r\n                <div>\r\n                    <h1>Loading teams...</h1>\r\n                    <Spinner color=\"primary\"/>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        const radiantPlayers = teams[\"radiant\"][\"players\"].map(player => {\r\n            return <ListGroupItem key={player}>{player}</ListGroupItem>\r\n        });\r\n\r\n        const direPlayers = teams[\"dire\"][\"players\"].map(player => {\r\n            return <ListGroupItem key={player}>{player}</ListGroupItem>\r\n        });\r\n\r\n        return (\r\n            <Container>\r\n                <Row>\r\n                    <Col>\r\n                        <Card>\r\n                            <CardImg\r\n                                src=\"https://gamepedia.cursecdn.com/dota2_gamepedia/9/9b/Radiant_logo.png?version=32e00d1012d73614f60704d6a77207cb\"\r\n                                alt=\"Radiant logo\"/>\r\n                            <CardBody>\r\n                                <CardTitle><h2>Radiant</h2></CardTitle>\r\n                                <CardSubtitle>Players:</CardSubtitle>\r\n                                <ListGroup flush>\r\n                                    {radiantPlayers}\r\n                                </ListGroup>\r\n                                <Button color=\"primary\" tag={Link} to=\"/radiant\"\r\n                                        disabled={teams[\"radiant\"][\"players\"].length >= 5}>Join</Button>\r\n                            </CardBody>\r\n                        </Card>\r\n                    </Col>\r\n                    <Col>\r\n                        <Card>\r\n                            <CardImg\r\n                                src=\"https://gamepedia.cursecdn.com/dota2_gamepedia/4/46/Dire_logo.png?version=26566f7414e47fa1203d2f0a0ae3d64b\"\r\n                                alt=\"Dire logo\"/>\r\n                            <CardBody>\r\n                                <CardTitle><h2>Dire</h2></CardTitle>\r\n                                <CardSubtitle>Players:</CardSubtitle>\r\n                                <ListGroup flush>\r\n                                    {direPlayers}\r\n                                </ListGroup>\r\n                                <Button color=\"primary\" tag={Link} to=\"/dire\"\r\n                                        disabled={teams[\"dire\"][\"players\"].length >= 5}>Join</Button>\r\n                            </CardBody>\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Welcome\r\n","import React from 'react'\r\nimport {\r\n    Button, InputGroupAddon, InputGroup, Input, ListGroup, ListGroupItem\r\n} from 'reactstrap';\r\n\r\n\r\nclass Chat extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            inputValue: \"\"\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Send initial message on joining\r\n        this.submitMessage(\"Has joined the team!\");\r\n        this.scrollToBottom();\r\n    }\r\n\r\n    updateInputValue(event) {\r\n        this.setState({\r\n            inputValue: event.target.value\r\n        });\r\n    }\r\n\r\n    handleKeyPress(event) {\r\n        if (event.key === 'Enter') {\r\n            this.submitMessage(this.state.inputValue);\r\n        }\r\n    }\r\n\r\n    submitMessage(message) {\r\n        this.props.backend.sendChatMessage(this.props.team, this.props.player, message);\r\n        this.setState({\r\n            inputValue: \"\"\r\n        });\r\n    }\r\n\r\n    scrollToBottom = () => {\r\n        this.messagesEnd.scrollIntoView({behavior: \"smooth\"});\r\n    };\r\n\r\n    componentDidUpdate(prevProps) {\r\n        // Scroll to bottom if update has changed the number of messages\r\n        if (prevProps.messages.length !== this.props.messages.length) {\r\n            this.scrollToBottom();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const messageList = this.props.messages.map(message => {\r\n            return <ListGroupItem key={message[\"timestamp\"]}>\r\n                {message[\"player\"] + \": \" + message[\"message\"]}\r\n            </ListGroupItem>;\r\n        });\r\n\r\n        // Dummy div used to scroll easily to bottom of messages listasd\r\n        const dummyForScroll = (\r\n            <div style={{float: \"left\", clear: \"both\"}}\r\n                 ref={(el) => {\r\n                     this.messagesEnd = el;\r\n                 }}>\r\n            </div>\r\n        );\r\n\r\n        return (\r\n            <div>\r\n                <ListGroup flush style={{\"overflowY\": \"auto\", \"maxHeight\": \"700px\"}}>\r\n                    {messageList}\r\n                    {dummyForScroll}\r\n                </ListGroup>\r\n                <InputGroup>\r\n                    <Input value={this.state.inputValue}\r\n                           onChange={(event) => this.updateInputValue(event)}\r\n                           onKeyPress={(event) => this.handleKeyPress(event)}/>\r\n                    <InputGroupAddon addonType=\"append\">\r\n                        <Button color=\"info\"\r\n                                disabled={this.state.inputValue.length <= 0}\r\n                                onClick={() => this.submitMessage(this.state.inputValue)}>Send</Button>\r\n                    </InputGroupAddon>\r\n                </InputGroup>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Chat\r\n","import React from 'react'\r\nimport {\r\n    Button, Card, CardImg, Col, Container,\r\n    Input,\r\n    Modal,\r\n    ModalBody,\r\n    ModalFooter,\r\n    ModalHeader, Row, Spinner, CardHeader, Progress,\r\n} from \"reactstrap\";\r\nimport Chat from \"./chat\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\n\r\nclass Team extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            playerNameInput: \"\",\r\n            playerName: null,\r\n        }\r\n    }\r\n\r\n    onPlayerNameInput(newValue) {\r\n        this.setState({\r\n            playerNameInput: newValue\r\n        })\r\n    }\r\n\r\n    playerNameChosen() {\r\n        const chosenPlayerName = this.state.playerNameInput;\r\n        this.setState({\r\n            playerName: chosenPlayerName,\r\n            playerNameInput: \"\",\r\n        });\r\n\r\n        this.props.backend.setPlayerName(this.props.teamName, chosenPlayerName);\r\n    }\r\n\r\n    onHeroClicked(playerIndex, heroId) {\r\n        this.props.backend.setSelectedHero(this.props.teamName, playerIndex, heroId)\r\n    }\r\n\r\n    render() {\r\n        // If team is undefined, just show a loading screen\r\n        const team = this.props.team;\r\n        const heroStats = this.props.heroStats;\r\n        if (team == null || heroStats == null) {\r\n            return (\r\n                <div>\r\n                    <h1>Loading teams...</h1>\r\n                    <Spinner color=\"primary\"/>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        // Show modal to allow picking player name if needed\r\n        const playerName = this.state.playerName;\r\n        const players = team[\"players\"];\r\n        if (playerName == null) {\r\n            // Navigate back to index if team is full\r\n            if (players.length >= 5) {\r\n                this.props.history.push(\"/\")\r\n            }\r\n\r\n            return (\r\n                <Modal isOpen autoFocus={false} className={this.props.className}>\r\n                    <ModalHeader>Specify name</ModalHeader>\r\n                    <ModalBody>\r\n                        <Input type=\"text\"\r\n                               autoFocus\r\n                               onChange={(event) => this.onPlayerNameInput(event.target.value)}\r\n                               placeholder=\"Please input your desired player name\"/>\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <Button color=\"primary\"\r\n                                disabled={this.state.playerNameInput.length <= 0}\r\n                                onClick={() => {\r\n                                    this.playerNameChosen();\r\n                                }}>Join</Button>\r\n                        <Button color=\"muted\" tag={Link} to=\"/\">Go back</Button>\r\n                    </ModalFooter>\r\n                </Modal>\r\n            );\r\n        }\r\n\r\n        const teamName = this.props.teamName;\r\n\r\n        // Look up a hero based on its ID in the dataset (rather than the index in the JSON array)\r\n        const findHero = (idx) => {\r\n            return heroStats.filter(hero => hero[\"id\"] === idx)[0];\r\n        };\r\n\r\n        const createPlayerRow = (playerIndex, player, hero_ids, selected_id) => {\r\n            return (\r\n                <Row style={{\"marginBottom\": \"10px\"}} key={player}>\r\n                    <div style={{\"width\": \"100%\", \"textAlign\": \"center\"}}>\r\n                        <Col>\r\n                            <h5 style={{\"marginBottom\": \"2px\"}}>{player}</h5>\r\n                        </Col>\r\n                    </div>\r\n                    <Row style={{\"marginLeft\": \"0px\", \"marginRight\": \"0px\"}}>\r\n                        {hero_ids.map(hero_id => {\r\n                            const hero = findHero(hero_id);\r\n                            const selected = hero_id === selected_id;\r\n                            const tooltipId = \"Card_\" + player + hero_id;\r\n                            return (\r\n                                <Col xs=\"4\" style={{\"padding\": \"2px\"}} key={tooltipId}>\r\n                                    <Card href=\"#\" id={tooltipId}\r\n                                          style={{cursor: \"pointer\"}}\r\n                                          onClick={() => this.onHeroClicked(playerIndex, hero_id)}\r\n                                          {...(selected ? {color: \"info\", inverse: true} : {})}>\r\n                                        <CardImg top src={this.props.backend.convertToApiPath(hero['img'])}\r\n                                                 alt=\"hero image\"/>\r\n                                        <CardHeader style={{\r\n                                            \"fontSize\": \"1.0rem\",\r\n                                            \"textAlign\": \"center\",\r\n                                            \"padding\": \"0.75rem 0.25rem\"\r\n                                        }}>\r\n                                            {hero['localized_name']}\r\n                                        </CardHeader>\r\n                                    </Card>\r\n                                </Col>\r\n                            )\r\n                        })}\r\n                    </Row>\r\n                </Row>\r\n            );\r\n        };\r\n\r\n        // Look up drafts for players on team\r\n        let drafts = [];\r\n        for (let index = 0; index < players.length; index++) {\r\n            const player = players[index];\r\n            const hero_ids = team[\"draft\"][index.toString()];\r\n            const selected_id = team[\"selectedHeroes\"][index.toString()];\r\n            drafts.push(createPlayerRow(index, player, hero_ids, selected_id));\r\n        }\r\n\r\n        const this_team_ready = team[\"ready\"];\r\n        const radiant_ready = this.props.readiness[\"radiant\"];\r\n        const dire_ready = this.props.readiness[\"dire\"];\r\n\r\n        const readyIndicator = <div style={{\"width\": \"100%\", \"textAlign\": \"center\", \"marginBottom\": \"30px\"}}>\r\n            <Button style={{\"marginBottom\": \"10px\"}}\r\n                {...(this_team_ready ? {color: \"success\"} : {color: \"secondary\"})}\r\n                    onClick={() => this.props.backend.setReady(teamName, !this_team_ready)}>Ready</Button>\r\n            <Progress multi>\r\n                <Progress bar value=\"50\"\r\n                          {...(radiant_ready ? {color: \"success\"} : {color: \"danger\"})}>Radiant</Progress>\r\n                <Progress bar value=\"50\"\r\n                          {...(dire_ready ? {color: \"success\"} : {color: \"danger\"})}>Dire</Progress>\r\n            </Progress>\r\n        </div>\r\n\r\n        return (\r\n            <Container>\r\n                <Row>\r\n                    <Col sm=\"12\" md=\"6\">\r\n                        {drafts}\r\n                    </Col>\r\n                    <Col sm=\"12\" md=\"6\">\r\n                        {readyIndicator}\r\n\r\n                        <Chat backend={this.props.backend}\r\n                              player={this.state.playerName}\r\n                              team={teamName}\r\n                              messages={this.props.messages}/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Team\r\n","import React from 'react'\r\nimport {\r\n    Spinner, Button, Container, Row, Col, Card, CardImg, CardText, CardBody, CardTitle,\r\n    CardSubtitle\r\n} from 'reactstrap';\r\nimport styled from 'styled-components';\r\n\r\nconst AlignedText = styled.div`\r\n  text-align: center;\r\n  vertical-align: middle;\r\n`;\r\n\r\n\r\nclass MainScreen extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            heroes: [],\r\n            draft: [],\r\n            team: []\r\n        };\r\n\r\n        // Fetch heroes from API, then perform first draft\r\n        fetch(\"https://api.opendota.com/api/heroStats\")\r\n            .then(res => res.json())\r\n            .then(result => {\r\n                this.setState({\r\n                        heroes: result\r\n                });\r\n                this.performDraft();\r\n            });\r\n    }\r\n\r\n    performDraft() {\r\n        // Split heroes based on main attribute\r\n        let mappedHeroes = {int: [], str: [], agi: []};\r\n        this.state.heroes.forEach(hero => {\r\n            const heroAttribute = hero['primary_attr'];\r\n            mappedHeroes[heroAttribute].push(hero)\r\n        });\r\n\r\n        this.setState({\r\n            // Sample one hero from each attribute type\r\n            draft: Object.values(mappedHeroes).map(heroes => this.randomSample(heroes))\r\n        });\r\n    }\r\n\r\n    convertToApiPath(path) {\r\n        return \"https://api.opendota.com\" + path\r\n    }\r\n\r\n    randomSample(items) {\r\n        return items[Math.floor(Math.random() * items.length)];\r\n    }\r\n\r\n    render() {\r\n        // Show loading screen\r\n        const hasLoaded = this.state.heroes.length > 0;\r\n        if (!hasLoaded) {\r\n            return (\r\n                <AlignedText>\r\n                    <h1>Loading heroes...</h1>\r\n                    <Spinner style={{ width: '2rem', height: '2rem' }} />\r\n                </AlignedText>\r\n            )\r\n        }\r\n\r\n        // Heroes have been loaded - render\r\n        const renderedHeroes = this.state.draft\r\n            .map(hero =>\r\n                <Col md=\"4\" xs=\"12\" key={hero['id']}>\r\n                    <Card>\r\n                        <CardImg top width=\"100%\" src={this.convertToApiPath(hero['img'])} alt=\"hero image\" />\r\n                        <CardBody>\r\n                            <CardTitle><h3>{hero['localized_name']}</h3></CardTitle>\r\n                            <CardSubtitle className=\"text-primary\">\r\n                                {hero['attack_type'] + \" \" + hero['primary_attr']}\r\n                            </CardSubtitle>\r\n                            <CardText className=\"text-info\">{hero['roles'].join(\", \")}</CardText>\r\n                        </CardBody>\r\n                    </Card>\r\n                </Col>\r\n            );\r\n\r\n        return (\r\n            <AlignedText>\r\n                <h1>You have been given:</h1>\r\n                <Container style={{marginTop: \"20px\", marginBottom: \"50px\"}}>\r\n                    <Row>\r\n                        {renderedHeroes}\r\n                    </Row>\r\n                </Container>\r\n                <Button color=\"primary\" onClick={(e) => {\r\n                    e.preventDefault();\r\n                    this.performDraft();\r\n                }}>Roll the dice again...</Button>\r\n            </AlignedText>\r\n        );\r\n    }\r\n}\r\n\r\nexport default MainScreen\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {HashRouter, Route, Switch} from 'react-router-dom';\r\nimport './index.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport styled from 'styled-components';\r\nimport Backend from './backend';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport Header from \"./components/header\";\r\nimport Welcome from \"./components/welcome\";\r\nimport Team from \"./components/team\";\r\nimport MainScreen from \"./MainScreen\";\r\n\r\nconst Main = styled.div`\r\n  max-width: 1024px;\r\n  margin: 0 auto; // Center in website\r\n`;\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            teams: null,\r\n            radiantMessages: [],\r\n            direMessages: [],\r\n            heroStats: null,\r\n            readiness: {\r\n                radiant: false,\r\n                dire: false\r\n            }\r\n        };\r\n\r\n        this.backend = new Backend((heroStats) => {\r\n            this.setState({\r\n                heroStats: heroStats\r\n            })\r\n        }, (game) => {\r\n            const teams = game[\"teams\"];\r\n            this.setState({\r\n                teams: teams,\r\n                radiantTeam: teams[\"radiant\"],\r\n                direTeam: teams[\"dire\"],\r\n                radiantMessages: teams[\"radiant\"][\"chat\"],\r\n                direMessages: teams[\"dire\"][\"chat\"],\r\n                readiness: {\r\n                    radiant: teams[\"radiant\"][\"ready\"],\r\n                    dire: teams[\"dire\"][\"ready\"]\r\n                }\r\n            })\r\n        }, () => {\r\n            console.log(\"New game detected - forcing all players back to welcome screen\");\r\n            this.router.history.push(\"/\");\r\n        });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <HashRouter basename=\"/\" ref={(router) => { this.router = router; }}>\r\n                <div>\r\n                    <Header backend={this.backend}/>\r\n                    <Main>\r\n                        <Switch>\r\n                            <Route exact\r\n                                   path='/'\r\n                                   render={(props) => <Welcome {...props} teams={this.state.teams}/>}\r\n                            />\r\n                            <Route exact\r\n                                   path='/old'\r\n                                   render={(props) => <MainScreen {...props}/>}\r\n                            />\r\n                            <Route exact\r\n                                   path='/radiant'\r\n                                   render={(props) => <Team {...props}\r\n                                                            backend={this.backend}\r\n                                                            teamName=\"radiant\"\r\n                                                            team={this.state.radiantTeam}\r\n                                                            readiness={this.state.readiness}\r\n                                                            heroStats={this.state.heroStats}\r\n                                                            messages={this.state.radiantMessages}/>}\r\n                            />\r\n                            <Route exact\r\n                                   path='/dire'\r\n                                   render={(props) => <Team {...props}\r\n                                                            backend={this.backend}\r\n                                                            teamName=\"dire\"\r\n                                                            team={this.state.direTeam}\r\n                                                            readiness={this.state.readiness}\r\n                                                            heroStats={this.state.heroStats}\r\n                                                            messages={this.state.direMessages}/>}\r\n                            />\r\n                            <Route render={(props) => <Welcome {...props} teams={this.state.teams}/>}/>\r\n                        </Switch>\r\n                    </Main>\r\n                </div>\r\n            </HashRouter>\r\n        );\r\n    }\r\n}\r\n\r\nReactDOM.render((\r\n        <App/>\r\n    ),\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}